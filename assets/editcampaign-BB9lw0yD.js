import{r as q,u as N}from"./validators-DD8u1gFa.js";import{_ as P}from"./AppTextField-kdAlZDBj.js";import{r as i,i as x,az as B,aA as L,ay as T,o as A,f as G,e as l,b as e,m as p,t as $,am as D}from"./index-Dco7z2gH.js";import{_ as j}from"./DemoSelectBasic-Co8H74IF.js";import{_ as h}from"./DemoSelectChips-DPuQpW7y.js";import{V as f,a as m}from"./VRow-CuYswbJw.js";import{V as d}from"./VCard-Bgiz3i9Q.js";import{V as o}from"./VCardText-CkDvxaKE.js";import"./VTextField-GKVZybIY.js";import"./VImg-Ccp8c_PP.js";import"./forwardRefs-DWGaNmQL.js";import"./AppSelect-CUZhe3D3.js";import"./VList-D7c96z10.js";import"./VAvatar-Xh_m_4zz.js";import"./VDivider-CPJBiuNb.js";import"./VOverlay-CCeVqth1.js";import"./VMenu-C-fiGVpT.js";import"./VChip-ClJTe-ik.js";/* empty css              */const se={__name:"editcampaign",setup(F){const V=i({}),E=i({}),c=i(""),y=i(""),k=i(""),_=i([]),v=i([]),g=i([]),b=i(""),C=i(""),U=i([]),O=x(),r=B();L(async()=>{const t=await T(`https://tg-adsnet-api-proxy.goourl.ru/api/campaign/${O.query.id}`,{method:"GET"});E.value=t,t.telegram_premium?c.value="Yes":c.value="No",y.value=t.title,k.value=t.description,t.language.forEach(s=>{_.value.push(r.languages[s])}),t.country.forEach(s=>{v.value.push(r.countries[s])}),t.platform.forEach(s=>{g.value.push(r.platforms[s])});const a=await T("https://tg-adsnet-api-proxy.goourl.ru/api/campaign/tasks/",{method:"GET"});V.value=a;for(const s in Object.keys(a))U.value.push(a[s]);b.value=V.value[t.task_type],C.value=t.target_url});const w=async()=>{const t=[];for(let n in r.platforms)g.value.includes(r.platforms[n])&&t.push(n);const a=[];for(let n in r.countries)v.value.includes(r.countries[n])&&a.push(n);const s=[];for(let n in r.languages)_.value.includes(r.languages[n])&&s.push(n);let u="";for(const n in Object.keys(V.value))b.value===V.value[n]&&(u=n);try{const n=await T(`https://tg-adsnet-api-proxy.goourl.ru/api/campaign/${O.query.id}/edit/`,{method:"PATCH",body:{title:y.value,description:k.value,telegram_premium:c.value,platform:t,country:a,language:s,target_url:C.value,task_type:`${u}`}})}catch(n){console.error(n)}};return(t,a)=>{const s=P;return A(),G(f,null,{default:l(()=>[e(m,{cols:"9",md:"9"},{default:l(()=>[e(d,{class:"mb-6",title:"Campaing update"},{default:l(()=>[e(o,null,{default:l(()=>[e(s,{modelValue:y.value,"onUpdate:modelValue":a[0]||(a[0]=u=>y.value=u),label:"Name",placeholder:"Campaing name"},null,8,["modelValue"])]),_:1}),e(o,null,{default:l(()=>[e(s,{modelValue:k.value,"onUpdate:modelValue":a[1]||(a[1]=u=>k.value=u),label:"Campaing description",placeholder:"Campaing description",rules:["requiredValidator"in t?t.requiredValidator:p(q)]},null,8,["modelValue","rules"])]),_:1}),e(o,null,{default:l(()=>[e(f,null,{default:l(()=>[e(m,{cols:"6",md:"6"},{default:l(()=>[e(d,{title:"GEO"},{default:l(()=>[e(o,null,{default:l(()=>[e(h,{modelValue:v.value,"onUpdate:modelValue":a[2]||(a[2]=u=>v.value=u),items:Object.values(p(r).countries),"selected-items":v.value},null,8,["modelValue","items","selected-items"])]),_:1})]),_:1})]),_:1}),e(m,{cols:"6",md:"6"},{default:l(()=>[e(d,{title:"Language"},{default:l(()=>[e(o,null,{default:l(()=>[e(h,{modelValue:_.value,"onUpdate:modelValue":a[3]||(a[3]=u=>_.value=u),items:Object.values(p(r).languages),"selected-items":_.value},null,8,["modelValue","items","selected-items"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(o,null,{default:l(()=>[e(f,null,{default:l(()=>[e(m,{cols:"6",md:"6"},{default:l(()=>[e(d,{title:"OS"},{default:l(()=>[e(o,null,{default:l(()=>[e(h,{modelValue:g.value,"onUpdate:modelValue":a[4]||(a[4]=u=>g.value=u),items:Object.values(p(r).platforms),"selected-items":g.value},null,8,["modelValue","items","selected-items"])]),_:1})]),_:1})]),_:1}),e(m,{cols:"6",md:"6"},{default:l(()=>[e(d,{title:"Premium"},{default:l(()=>[e(o,null,{default:l(()=>[e(j,{modelValue:c.value,"onUpdate:modelValue":a[5]||(a[5]=u=>c.value=u),items:["Yes","No"]},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(d,{class:"mb-6",title:"Task settings"},{default:l(()=>[e(o,null,{default:l(()=>[e(f,null,{default:l(()=>[e(m,{cols:"6",md:"6"},{default:l(()=>[e(d,null,{default:l(()=>[e(o,null,{default:l(()=>[e(j,{modelValue:b.value,"onUpdate:modelValue":a[6]||(a[6]=u=>b.value=u),label:"Task type",items:U.value},null,8,["modelValue","items"])]),_:1})]),_:1})]),_:1}),e(m,{cols:"6",md:"6"},{default:l(()=>[e(d,null,{default:l(()=>[e(o,null,{default:l(()=>[e(s,{modelValue:C.value,"onUpdate:modelValue":a[7]||(a[7]=u=>C.value=u),label:"Target link",type:"text",rules:["requiredValidator"in t?t.requiredValidator:p(q),"urlValidator"in t?t.urlValidator:p(N)]},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(o,null,{default:l(()=>[e(f,null,{default:l(()=>[e(m,{cols:"6",md:"6"},{default:l(()=>[e(d,null,{default:l(()=>[e(o,null,{default:l(()=>[$(" 12312312312312 ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(d,{class:"mb-6",title:"Finance settings"},{default:l(()=>[e(o,null,{default:l(()=>[e(f,null,{default:l(()=>[e(m,{cols:"6",md:"6"},{default:l(()=>[e(d,null,{default:l(()=>[e(o,null,{default:l(()=>[e(s,{label:"Task price","prepend-inner-icon":"tabler-currency-dollar",placeholder:"0.00"})]),_:1})]),_:1})]),_:1}),e(m,{cols:"6",md:"6"},{default:l(()=>[e(d,null,{default:l(()=>[e(o,null,{default:l(()=>[e(s,{label:"Campaign limit","prepend-inner-icon":"tabler-currency-dollar",placeholder:"0.00"})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(m,{cols:"3",md:"3"},{default:l(()=>[e(d,{class:"campaing-btn-card"},{default:l(()=>[e(o,null,{default:l(()=>[e(D,{color:"primary",block:"",onClick:w},{default:l(()=>[$(" Update ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}};export{se as default};
