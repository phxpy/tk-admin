import{V as T,_ as q}from"./VDataTableServer-COX6cbCK.js";import{_ as B}from"./AppSelect-B-nyKOLx.js";import{u as E}from"./global-H9jDpRRy.js";import{i as A,r as m,G as N,$ as b,a as P,o as x,f as V,e as t,ax as h,b as a,d as r,al as R,m as f,t as l,v as o,y as U,a1 as k,Q as z,R as G}from"./index-8h5Sf3lB.js";import{_ as j}from"./plugin-vue_export-helper-DlAUqK2U.js";import{V as F}from"./VCard-Bo4wDBb9.js";import{V as L}from"./VCardText-Dt1Wc7Ua.js";import{V as M}from"./VDivider-DdofiGtu.js";import{V as O}from"./VAvatar-DsUcJw98.js";import{V as Q}from"./VImg-B7yVVr1w.js";import"./VCheckboxBtn-BDCWPbXZ.js";import"./VTextField-CGQgX7zq.js";import"./forwardRefs-DWGaNmQL.js";import"./VChip-DNf7PA5m.js";import"./VList-Bge-STmj.js";import"./VOverlay-DoMPDXw-.js";import"./VMenu-BzuLD5Ze.js";const H=p=>(z("data-v-febd838e"),p=p(),G(),p),J={class:"d-flex gap-4 align-center flex-wrap"},K={class:"d-flex align-center gap-2"},W=H(()=>r("span",null,"Show",-1)),X={class:"d-flex align-center gap-x-3"},Y={class:"d-flex flex-column"},Z={class:"text-body-1 font-weight-medium"},ee={class:"text-body-2"},te={__name:"creatives",setup(p){const w=E(),u=A(),c=m({}),I=[{title:"CREATIVE ID",key:"id",sortable:!1},{title:"Status",key:"status",sortable:!1},{title:"Creative",key:"creative",sortable:!1},{title:"Spend",key:"spend",sortable:!1},{title:"Views",key:"views",sortable:!1},{title:"Clicks",key:"clicks",sortable:!1},{title:"CTR",key:"ctr",sortable:!1},{title:"Date created",key:"created_at",sortable:!1},{title:"Action",key:"actions",sortable:!1}],v=m([]),_=async()=>{const d=await h(`https://tg-adsnet-api-proxy.goourl.ru/api/campaign/${u.query.id}/creative/`,{method:"GET"});v.value=d};N(async()=>{_()});const n=m(1),i=m(10),C=b(()=>v.value.slice((n.value-1)*i.value,n.value*i.value)),g=b(()=>v.value.length),S=async d=>{c.value[d]=!0;try{await h(`https://tg-adsnet-api-proxy.goourl.ru/api/campaign/${u.query.id}/creative/${d}/delete/`,{method:"DELETE"}),_()}catch(s){console.log(s)}finally{c.value[d]=!1}};return(d,s)=>{const $=B,y=P("IconBtn"),D=q;return x(),V(F,null,{default:t(()=>[a(L,{class:"d-flex justify-space-between align-center flex-wrap gap-4"},{default:t(()=>[r("div",J,[r("div",K,[W,a($,{"model-value":i.value,items:[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"},{value:-1,title:"All"}],style:{"inline-size":"5.5rem"},"onUpdate:modelValue":s[0]||(s[0]=e=>i.value=parseInt(e,10))},null,8,["model-value"])]),a(R,{"prepend-icon":"tabler-plus",to:{name:"addcreative",query:{campId:f(u).query.id}}},{default:t(()=>[l(" New creative ")]),_:1},8,["to"])])]),_:1}),a(M),a(T,{"items-per-page":i.value,"onUpdate:itemsPerPage":s[2]||(s[2]=e=>i.value=e),page:n.value,"onUpdate:page":s[3]||(s[3]=e=>n.value=e),headers:I,items:C.value,"items-length":g.value,class:"text-no-wrap"},{"item.id":t(({item:e})=>[l(o(e.stats.creativeId),1)]),"item.status":t(({item:e})=>[l(o(e.status||"-"),1)]),"item.creative":t(({item:e})=>[r("div",X,[a(O,{size:"34"},{default:t(()=>[e.icon?(x(),V(Q,{key:0,src:`https://tg-adsnet-core.goourl.ru${e.icon}`},null,8,["src"])):U("",!0)]),_:2},1024),r("div",Y,[r("div",Z,o(e.title),1),r("div",ee,o(e.description),1)])])]),"item.spend":t(({item:e})=>[l(o(e.stats.sum_advert),1)]),"item.views":t(({item:e})=>[l(o(e.stats.sum_views),1)]),"item.clicks":t(({item:e})=>[l(o(e.stats.sum_hits),1)]),"item.ctr":t(({item:e})=>[l(o(e.stats.ctr),1)]),"item.created_at":t(({item:e})=>[l(o(f(w).timeFormatter.format(new Date(e.created_at))),1)]),"item.actions":t(({item:e})=>[a(y,{to:{name:"editcreative",query:{campId:f(u).query.id,creativeId:e.id}},disabled:c.value[e.id]},{default:t(()=>[a(k,{icon:"tabler-edit"})]),_:2},1032,["to","disabled"]),a(y,{loading:c.value[e.id],disabled:c.value[e.id],onClick:ae=>S(e.id)},{default:t(()=>[a(k,{icon:"tabler-trash"})]),_:2},1032,["loading","disabled","onClick"])]),bottom:t(()=>[a(D,{page:n.value,"onUpdate:page":s[1]||(s[1]=e=>n.value=e),"items-per-page":i.value,"total-items":g.value},null,8,["page","items-per-page","total-items"])]),_:1},8,["items-per-page","page","items","items-length"])]),_:1})}}},xe=j(te,[["__scopeId","data-v-febd838e"]]);export{xe as default};
