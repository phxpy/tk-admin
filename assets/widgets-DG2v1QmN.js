import{V as k,_ as S}from"./VDataTableServer-43r6mKWS.js";import{_ as $}from"./AppSelect-BUMbAMKh.js";import{i as B,r as p,G as C,$ as _,a as D,o as T,f as N,e as a,ax as w,b as s,d as c,al as P,m as E,t as d,v as m,a1 as U,Q as q,R as A}from"./index-BS23A-8V.js";import{_ as W}from"./plugin-vue_export-helper-DlAUqK2U.js";import{V as G}from"./VCard-Bl_1nObG.js";import{V as R}from"./VCardText-Dupa1F-9.js";import{V as j}from"./VDivider-xe3kAmFZ.js";import"./VCheckboxBtn-BwMhMMIL.js";import"./VTextField-BBIv_7GE.js";import"./VImg-CEGqANsG.js";import"./forwardRefs-DWGaNmQL.js";import"./VChip-CDyJhLnZ.js";import"./VAvatar-C3Dh_S9l.js";import"./VList-F8ys7wTi.js";import"./VOverlay-Dn-Hev6S.js";import"./VMenu-DKlu_i5k.js";const z=n=>(q("data-v-57133d61"),n=n(),A(),n),L={class:"d-flex gap-4 align-center flex-wrap"},M={class:"d-flex align-center gap-2"},O=z(()=>c("span",null,"Show",-1)),Q={__name:"widgets",setup(n){const g=B(),r=p({}),y=[{title:"Widget Id",key:"id",sortable:!1},{title:"Name",key:"name",sortable:!1},{title:"Description",key:"description",sortable:!1},{title:"Action",key:"actions",sortable:!1}],u=p([]),v=async()=>{const i=await w(`https://tg-adsnet-api-proxy.goourl.ru/api/site/${g.query.id}/widgets/`,{method:"GET"});u.value=i};C(async()=>{v()});const l=p(1),o=p(10),x=_(()=>u.value.slice((l.value-1)*o.value,l.value*o.value)),f=_(()=>u.value.length),V=async i=>{r.value[i]=!0;try{await w(`https://tg-adsnet-api-proxy.goourl.ru/api/widget/${i}/delete/`,{method:"DELETE"}),v()}catch(t){console.log(t)}finally{r.value[i]=!1}};return(i,t)=>{const b=$,h=D("IconBtn"),I=S;return T(),N(G,null,{default:a(()=>[s(R,{class:"d-flex justify-space-between align-center flex-wrap gap-4"},{default:a(()=>[c("div",L,[c("div",M,[O,s(b,{"model-value":o.value,items:[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"},{value:-1,title:"All"}],style:{"inline-size":"5.5rem"},"onUpdate:modelValue":t[0]||(t[0]=e=>o.value=parseInt(e,10))},null,8,["model-value"])]),s(P,{"prepend-icon":"tabler-plus",to:{name:"addwidget",query:{siteId:E(g).query.id}}},{default:a(()=>[d(" New widget ")]),_:1},8,["to"])])]),_:1}),s(j),s(k,{"items-per-page":o.value,"onUpdate:itemsPerPage":t[2]||(t[2]=e=>o.value=e),page:l.value,"onUpdate:page":t[3]||(t[3]=e=>l.value=e),headers:y,items:x.value,"items-length":f.value,class:"text-no-wrap"},{"item.id":a(({item:e})=>[d(m(e.id),1)]),"item.name":a(({item:e})=>[d(m(e.name),1)]),"item.desctiption":a(({item:e})=>[d(m(e.description),1)]),"item.actions":a(({item:e})=>[s(h,{loading:r.value[e.id],disabled:r.value[e.id],onClick:F=>V(e.id)},{default:a(()=>[s(U,{icon:"tabler-trash"})]),_:2},1032,["loading","disabled","onClick"])]),bottom:a(()=>[s(I,{page:l.value,"onUpdate:page":t[1]||(t[1]=e=>l.value=e),"items-per-page":o.value,"total-items":f.value},null,8,["page","items-per-page","total-items"])]),_:1},8,["items-per-page","page","items","items-length"])]),_:1})}}},de=W(Q,[["__scopeId","data-v-57133d61"]]);export{de as default};
