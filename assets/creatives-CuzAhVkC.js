import{V as T,_ as q}from"./VDataTableServer-Dz50i3bZ.js";import{_ as B}from"./AppSelect-DCmqlFUf.js";import{u as E}from"./global-CoD641hM.js";import{i as A,r as m,G as N,$ as x,a as P,o as V,f as h,e as t,ax as k,b as s,d as r,al as R,m as _,t as i,v as o,y as U,a1 as w,Q as z,R as G}from"./index-CWraBpLz.js";import{_ as j}from"./plugin-vue_export-helper-DlAUqK2U.js";import{V as F}from"./VCard-DZoQsszH.js";import{V as L}from"./VCardText-DiSglReM.js";import{V as M}from"./VDivider-Bq4qZXJE.js";import{V as O}from"./VAvatar-l8SG5SE9.js";import{V as Q}from"./VImg-M8Sh9rRd.js";import"./VCheckboxBtn-BFg9wEe8.js";import"./VTextField-DwMYOT3R.js";import"./forwardRefs-DWGaNmQL.js";import"./VChip-C13b0Um0.js";import"./VList-6yLAQCTI.js";import"./VOverlay-CN531U9F.js";import"./VMenu-BphMWXre.js";const H=p=>(z("data-v-7974a372"),p=p(),G(),p),J={class:"d-flex gap-4 align-center flex-wrap"},K={class:"d-flex align-center gap-2"},W=H(()=>r("span",null,"Show",-1)),X={class:"d-flex align-center gap-x-3"},Y={class:"d-flex flex-column"},Z={class:"text-body-1 font-weight-medium"},ee={class:"text-body-2"},te={__name:"creatives",setup(p){const C=E(),u=A(),c=m({}),I=[{title:"CREATIVE ID",key:"id",sortable:!1},{title:"Status",key:"status",sortable:!1},{title:"Creative",key:"creative",sortable:!1},{title:"Spend",key:"spend",sortable:!1},{title:"Views",key:"views",sortable:!1},{title:"Clicks",key:"clicks",sortable:!1},{title:"CTR",key:"ctr",sortable:!1},{title:"Date created",key:"created_at",sortable:!1},{title:"Action",key:"actions",sortable:!1}],v=m([]),g=async()=>{const d=await k(`https://tg-adsnet-api-proxy.goourl.ru/api/campaign/${u.query.id}/creative/`,{method:"GET"});v.value=d.toSorted((a,f)=>f.id-a.id)};N(async()=>{g()});const n=m(1),l=m(10),S=x(()=>v.value.slice((n.value-1)*l.value,n.value*l.value)),y=x(()=>v.value.length),$=async d=>{c.value[d]=!0;try{await k(`https://tg-adsnet-api-proxy.goourl.ru/api/campaign/${u.query.id}/creative/${d}/delete/`,{method:"DELETE"}),g()}catch(a){console.log(a)}finally{c.value[d]=!1}};return(d,a)=>{const f=B,b=P("IconBtn"),D=q;return V(),h(F,null,{default:t(()=>[s(L,{class:"d-flex justify-space-between align-center flex-wrap gap-4"},{default:t(()=>[r("div",J,[r("div",K,[W,s(f,{"model-value":l.value,items:[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"},{value:-1,title:"All"}],style:{"inline-size":"5.5rem"},"onUpdate:modelValue":a[0]||(a[0]=e=>l.value=parseInt(e,10))},null,8,["model-value"])]),s(R,{"prepend-icon":"tabler-plus",to:{name:"addcreative",query:{campId:_(u).query.id}}},{default:t(()=>[i(" New creative ")]),_:1},8,["to"])])]),_:1}),s(M),s(T,{"items-per-page":l.value,"onUpdate:itemsPerPage":a[2]||(a[2]=e=>l.value=e),page:n.value,"onUpdate:page":a[3]||(a[3]=e=>n.value=e),headers:I,items:S.value,"items-length":y.value,class:"text-no-wrap"},{"item.id":t(({item:e})=>[i(o(e.id),1)]),"item.status":t(({item:e})=>[i(o(e.status||"-"),1)]),"item.creative":t(({item:e})=>[r("div",X,[s(O,{size:"34"},{default:t(()=>[e.icon?(V(),h(Q,{key:0,src:`https://tg-adsnet-core.goourl.ru${e.icon}`},null,8,["src"])):U("",!0)]),_:2},1024),r("div",Y,[r("div",Z,o(e.title),1),r("div",ee,o(e.description),1)])])]),"item.spend":t(({item:e})=>[i(o(e.stats.sum_advert),1)]),"item.views":t(({item:e})=>[i(o(e.stats.sum_views),1)]),"item.clicks":t(({item:e})=>[i(o(e.stats.sum_hits),1)]),"item.ctr":t(({item:e})=>[i(o(e.stats.ctr),1)]),"item.created_at":t(({item:e})=>[i(o(_(C).timeFormatter.format(new Date(e.created_at))),1)]),"item.actions":t(({item:e})=>[s(b,{to:{name:"editcreative",query:{campId:_(u).query.id,creativeId:e.id}},disabled:c.value[e.id]},{default:t(()=>[s(w,{icon:"tabler-edit"})]),_:2},1032,["to","disabled"]),s(b,{loading:c.value[e.id],disabled:c.value[e.id],onClick:ae=>$(e.id)},{default:t(()=>[s(w,{icon:"tabler-trash"})]),_:2},1032,["loading","disabled","onClick"])]),bottom:t(()=>[s(D,{page:n.value,"onUpdate:page":a[1]||(a[1]=e=>n.value=e),"items-per-page":l.value,"total-items":y.value},null,8,["page","items-per-page","total-items"])]),_:1},8,["items-per-page","page","items","items-length"])]),_:1})}}},xe=j(te,[["__scopeId","data-v-7974a372"]]);export{xe as default};
