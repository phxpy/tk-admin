import{r as f,u as P}from"./validators-DD8u1gFa.js";import{_ as $}from"./AppTextField-UbxN3Csg.js";import{az as j,r as i,G,ax as q,$ as L,o as B,f as F,e,b as l,m as u,an as p,t as h,al as S}from"./index-DjTsIlKx.js";import{_ as C,a as w}from"./DemoSelectChips-CwdWoPEV.js";import{V as c,a as n}from"./VRow-DZAO2dL4.js";import{V as d}from"./VCard-CB9Nw_l4.js";import{V as r}from"./VCardText-NvA5RlKj.js";import"./VTextField-1MIzlOCc.js";import"./VImg-CAE0EHAq.js";import"./forwardRefs-DWGaNmQL.js";import"./AppSelect-DefuZ7wx.js";import"./VList-9G-E0lfh.js";import"./VAvatar-0bmxWKaC.js";import"./VDivider-DqMi194x.js";import"./VOverlay-ojAQHOgf.js";import"./VMenu-BmWZhn2k.js";import"./VCheckboxBtn-DDc5BKYo.js";import"./VChip-DzMEg8d6.js";/* empty css              */const ul={__name:"newcampaign",setup(E){const s=j(),V=i(""),_=i([]),g=i([]),v=i([]),k=i("No"),y=i(""),T=i([]),b=i(""),O=i([]);G(async()=>{const t=await q("https://tg-adsnet-api-proxy.goourl.ru/api/campaign/tasks/",{method:"GET"});for(const o in Object.keys(t))T.value.push(t[o])});const U=L(()=>V.value&&_.value.length>0&&g.value.length>0&&v.value.length>0&&y.value&&b.value),N=async()=>{const t=[];for(let a in s.platforms)v.value.includes(s.platforms[a])&&t.push(a);const o=[];for(let a in s.countries)_.value.includes(s.countries[a])&&o.push(a);const m=[];for(let a in s.languages)g.value.includes(s.languages[a])&&m.push(a);try{const a=await q("https://tg-adsnet-api-proxy.goourl.ru/api/campaign/add/",{method:"POST",body:{title:V.value,description:"test",target_url:y.value,category:4,cpc:1,scf:1,daily_views_limit:1e4,total_budget:"100",telegram_premium:"true",motivated_traffic:"true",task_type:"2",platform:t,country:o,language:m}});await q(`https://tg-adsnet-api-proxy.goourl.ru/api/campaign/${a.created.id}/to_moderate/`,{method:"POST"}),router.push({path:"/creatives",query:{id:a.created.id}})}catch(a){console.error(a)}};return(t,o)=>{const m=$;return B(),F(c,null,{default:e(()=>[l(n,{cols:"9",md:"9"},{default:e(()=>[l(d,{class:"mb-6",title:"New campaing"},{default:e(()=>[l(r,null,{default:e(()=>[l(m,{modelValue:u(V),"onUpdate:modelValue":o[0]||(o[0]=a=>p(V)?V.value=a:null),label:"Name",placeholder:"Campaing name",rules:["requiredValidator"in t?t.requiredValidator:u(f)]},null,8,["modelValue","rules"])]),_:1}),l(r,null,{default:e(()=>[l(c,null,{default:e(()=>[l(n,{cols:"6",md:"6"},{default:e(()=>[l(d,{title:"GEO"},{default:e(()=>[l(r,null,{default:e(()=>[l(C,{modelValue:u(_),"onUpdate:modelValue":o[1]||(o[1]=a=>p(_)?_.value=a:null),items:Object.values(u(s).countries),rules:["requiredValidator"in t?t.requiredValidator:u(f)]},null,8,["modelValue","items","rules"])]),_:1})]),_:1})]),_:1}),l(n,{cols:"6",md:"6"},{default:e(()=>[l(d,{title:"Language"},{default:e(()=>[l(r,null,{default:e(()=>[l(C,{modelValue:u(g),"onUpdate:modelValue":o[2]||(o[2]=a=>p(g)?g.value=a:null),items:Object.values(u(s).languages),rules:["requiredValidator"in t?t.requiredValidator:u(f)]},null,8,["modelValue","items","rules"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(r,null,{default:e(()=>[l(c,null,{default:e(()=>[l(n,{cols:"6",md:"6"},{default:e(()=>[l(d,{title:"OS"},{default:e(()=>[l(r,null,{default:e(()=>[l(C,{modelValue:u(v),"onUpdate:modelValue":o[3]||(o[3]=a=>p(v)?v.value=a:null),items:Object.values(u(s).platforms),rules:["requiredValidator"in t?t.requiredValidator:u(f)]},null,8,["modelValue","items","rules"])]),_:1})]),_:1})]),_:1}),l(n,{cols:"6",md:"6"},{default:e(()=>[l(d,{title:"Premium"},{default:e(()=>[l(r,null,{default:e(()=>[l(w,{modelValue:u(k),"onUpdate:modelValue":o[4]||(o[4]=a=>p(k)?k.value=a:null),items:["Yes","No"]},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(d,{class:"mb-6",title:"Task settings"},{default:e(()=>[l(r,null,{default:e(()=>[l(c,null,{default:e(()=>[l(n,{cols:"6",md:"6"},{default:e(()=>[l(d,null,{default:e(()=>[l(r,null,{default:e(()=>[l(w,{modelValue:u(b),"onUpdate:modelValue":o[5]||(o[5]=a=>p(b)?b.value=a:null),label:"Task type",items:u(T),rules:["requiredValidator"in t?t.requiredValidator:u(f)]},null,8,["modelValue","items","rules"])]),_:1})]),_:1})]),_:1}),l(n,{cols:"6",md:"6"},{default:e(()=>[l(d,null,{default:e(()=>[l(r,null,{default:e(()=>[l(m,{modelValue:u(y),"onUpdate:modelValue":o[6]||(o[6]=a=>p(y)?y.value=a:null),label:"Target link",type:"text",rules:["requiredValidator"in t?t.requiredValidator:u(f),"urlValidator"in t?t.urlValidator:u(P)]},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(r,null,{default:e(()=>[l(c,null,{default:e(()=>[l(n,{cols:"6",md:"6"},{default:e(()=>[l(d,null,{default:e(()=>[l(r,null,{default:e(()=>[h(" Information about system macros ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(d,{class:"mb-6",title:"Finance settings"},{default:e(()=>[l(r,null,{default:e(()=>[l(c,null,{default:e(()=>[l(n,{cols:"6",md:"6"},{default:e(()=>[l(d,null,{default:e(()=>[l(r,null,{default:e(()=>[l(m,{label:"Task price","prepend-inner-icon":"tabler-currency-dollar",placeholder:"0.00"})]),_:1})]),_:1})]),_:1}),l(n,{cols:"6",md:"6"},{default:e(()=>[l(d,null,{default:e(()=>[l(r,null,{default:e(()=>[l(m,{label:"Campaign limit","prepend-inner-icon":"tabler-currency-dollar",placeholder:"0.00"})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(n,{cols:"3",md:"3"},{default:e(()=>[l(d,{class:"campaing-btn-card"},{default:e(()=>[l(r,null,{default:e(()=>[l(S,{loading:u(O)[0],color:"primary",disabled:!u(U),block:"",onClick:N},{default:e(()=>[h(" Create ")]),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1})]),_:1})}}};export{ul as default};
