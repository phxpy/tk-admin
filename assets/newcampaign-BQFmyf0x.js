import{r as c,u as G}from"./validators-DD8u1gFa.js";import{_ as L}from"./AppTextField-C2IIb6VJ.js";import{az as B,r as s,G as F,ax as h,$ as S,o as E,f as R,e,b as l,m as t,an as f,t as U,al as z}from"./index-8h5Sf3lB.js";import{_ as O,a as $}from"./DemoSelectChips-CEhfuYqI.js";import{V,a as i}from"./VRow-BMVSRjyr.js";import{V as n}from"./VCard-Bo4wDBb9.js";import{V as r}from"./VCardText-Dt1Wc7Ua.js";import"./VTextField-CGQgX7zq.js";import"./VImg-B7yVVr1w.js";import"./forwardRefs-DWGaNmQL.js";import"./AppSelect-B-nyKOLx.js";import"./VList-Bge-STmj.js";import"./VAvatar-DsUcJw98.js";import"./VDivider-DdofiGtu.js";import"./VOverlay-DoMPDXw-.js";import"./VMenu-BzuLD5Ze.js";import"./VCheckboxBtn-BDCWPbXZ.js";import"./VChip-DNf7PA5m.js";/* empty css              */const dl={__name:"newcampaign",setup(A){const m=B(),T=s({}),g=s(""),q=s(""),_=s([]),v=s([]),y=s([]),C=s("No"),b=s(""),w=s([]),k=s(""),j=s([]);F(async()=>{const a=await h("https://tg-adsnet-api-proxy.goourl.ru/api/campaign/tasks/",{method:"GET"});T.value=a;for(const u in Object.keys(a))w.value.push(a[u])});const N=S(()=>g.value&&_.value.length>0&&v.value.length>0&&y.value.length>0&&b.value&&k.value),P=async()=>{const a=[];for(let d in m.platforms)y.value.includes(m.platforms[d])&&a.push(d);const u=[];for(let d in m.countries)_.value.includes(m.countries[d])&&u.push(d);const p=[];for(let d in m.languages)v.value.includes(m.languages[d])&&p.push(d);let o="";for(const d in Object.keys(T.value))k.value===T.value[d]&&(o=d);try{const d=await h("https://tg-adsnet-api-proxy.goourl.ru/api/campaign/add/",{method:"POST",body:{title:g.value,description:q.value,target_url:b.value,category:4,cpc:1,scf:1,daily_views_limit:1e4,total_budget:"100",telegram_premium:"true",motivated_traffic:"true",task_type:`${o}`,platform:a,country:u,language:p}});await h(`https://tg-adsnet-api-proxy.goourl.ru/api/campaign/${d.created.id}/to_moderate/`,{method:"POST"}),router.push({path:"/creatives",query:{id:d.created.id}})}catch(d){console.error(d)}};return(a,u)=>{const p=L;return E(),R(V,null,{default:e(()=>[l(i,{cols:"9",md:"9"},{default:e(()=>[l(n,{class:"mb-6",title:"New campaing"},{default:e(()=>[l(r,null,{default:e(()=>[l(p,{modelValue:t(g),"onUpdate:modelValue":u[0]||(u[0]=o=>f(g)?g.value=o:null),label:"Name",placeholder:"Campaing name",rules:["requiredValidator"in a?a.requiredValidator:t(c)]},null,8,["modelValue","rules"])]),_:1}),l(r,null,{default:e(()=>[l(p,{modelValue:t(q),"onUpdate:modelValue":u[1]||(u[1]=o=>f(q)?q.value=o:null),label:"Campaing description",placeholder:"Campaing description",rules:["requiredValidator"in a?a.requiredValidator:t(c)]},null,8,["modelValue","rules"])]),_:1}),l(r,null,{default:e(()=>[l(V,null,{default:e(()=>[l(i,{cols:"6",md:"6"},{default:e(()=>[l(n,{title:"GEO"},{default:e(()=>[l(r,null,{default:e(()=>[l(O,{modelValue:t(_),"onUpdate:modelValue":u[2]||(u[2]=o=>f(_)?_.value=o:null),items:Object.values(t(m).countries),rules:["requiredValidator"in a?a.requiredValidator:t(c)]},null,8,["modelValue","items","rules"])]),_:1})]),_:1})]),_:1}),l(i,{cols:"6",md:"6"},{default:e(()=>[l(n,{title:"Language"},{default:e(()=>[l(r,null,{default:e(()=>[l(O,{modelValue:t(v),"onUpdate:modelValue":u[3]||(u[3]=o=>f(v)?v.value=o:null),items:Object.values(t(m).languages),rules:["requiredValidator"in a?a.requiredValidator:t(c)]},null,8,["modelValue","items","rules"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(r,null,{default:e(()=>[l(V,null,{default:e(()=>[l(i,{cols:"6",md:"6"},{default:e(()=>[l(n,{title:"OS"},{default:e(()=>[l(r,null,{default:e(()=>[l(O,{modelValue:t(y),"onUpdate:modelValue":u[4]||(u[4]=o=>f(y)?y.value=o:null),items:Object.values(t(m).platforms),rules:["requiredValidator"in a?a.requiredValidator:t(c)]},null,8,["modelValue","items","rules"])]),_:1})]),_:1})]),_:1}),l(i,{cols:"6",md:"6"},{default:e(()=>[l(n,{title:"Premium"},{default:e(()=>[l(r,null,{default:e(()=>[l($,{modelValue:t(C),"onUpdate:modelValue":u[5]||(u[5]=o=>f(C)?C.value=o:null),items:["Yes","No"]},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(n,{class:"mb-6",title:"Task settings"},{default:e(()=>[l(r,null,{default:e(()=>[l(V,null,{default:e(()=>[l(i,{cols:"6",md:"6"},{default:e(()=>[l(n,null,{default:e(()=>[l(r,null,{default:e(()=>[l($,{modelValue:t(k),"onUpdate:modelValue":u[6]||(u[6]=o=>f(k)?k.value=o:null),label:"Task type",items:t(w),rules:["requiredValidator"in a?a.requiredValidator:t(c)]},null,8,["modelValue","items","rules"])]),_:1})]),_:1})]),_:1}),l(i,{cols:"6",md:"6"},{default:e(()=>[l(n,null,{default:e(()=>[l(r,null,{default:e(()=>[l(p,{modelValue:t(b),"onUpdate:modelValue":u[7]||(u[7]=o=>f(b)?b.value=o:null),label:"Target link",type:"text",rules:["requiredValidator"in a?a.requiredValidator:t(c),"urlValidator"in a?a.urlValidator:t(G)]},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(r,null,{default:e(()=>[l(V,null,{default:e(()=>[l(i,{cols:"6",md:"6"},{default:e(()=>[l(n,null,{default:e(()=>[l(r,null,{default:e(()=>[U(" Information about system macros ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(n,{class:"mb-6",title:"Finance settings"},{default:e(()=>[l(r,null,{default:e(()=>[l(V,null,{default:e(()=>[l(i,{cols:"6",md:"6"},{default:e(()=>[l(n,null,{default:e(()=>[l(r,null,{default:e(()=>[l(p,{label:"Task price","prepend-inner-icon":"tabler-currency-dollar",placeholder:"0.00"})]),_:1})]),_:1})]),_:1}),l(i,{cols:"6",md:"6"},{default:e(()=>[l(n,null,{default:e(()=>[l(r,null,{default:e(()=>[l(p,{label:"Campaign limit","prepend-inner-icon":"tabler-currency-dollar",placeholder:"0.00"})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(i,{cols:"3",md:"3"},{default:e(()=>[l(n,{class:"campaing-btn-card"},{default:e(()=>[l(r,null,{default:e(()=>[l(z,{loading:t(j)[0],color:"primary",disabled:!t(N),block:"",onClick:P},{default:e(()=>[U(" Create ")]),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1})]),_:1})}}};export{dl as default};
