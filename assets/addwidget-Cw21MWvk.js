import{r as c}from"./validators-DD8u1gFa.js";import{_ as y}from"./AppTextField-Be7jn6rz.js";import{i as q,j as v,r as u,$ as C,o as h,f as T,e as a,b as e,m as l,an as f,al as k,t as x,ax as R}from"./index-CYp9PX9m.js";import{V as W,a as V}from"./VRow-B3_zrk66.js";import{V as g}from"./VCard-B2fiEv2A.js";import{V as n}from"./VCardText-14BuuPK9.js";import"./VTextField-DvVMCfta.js";import"./VImg-BdqCSq8N.js";import"./forwardRefs-DWGaNmQL.js";/* empty css              */import"./VAvatar-DqkvVaPE.js";const z={__name:"addwidget",setup(B){const m=q(),_=v(),r=u(""),o=u(""),d=u(!1),w=C(()=>r.value),b=async()=>{d.value=!0;try{await R("https://tg-adsnet-api-proxy.goourl.ru/api/widget/add/",{method:"POST",body:{name:r.value,description:o.value,site:m.query.siteId}}),_.push({path:"/widgets",query:{id:m.query.siteId}})}catch(t){console.error(t)}finally{d.value=!1}};return(t,i)=>{const p=y;return h(),T(W,null,{default:a(()=>[e(V,{cols:"9",md:"9"},{default:a(()=>[e(g,{class:"mb-6",title:"New widget"},{default:a(()=>[e(n,null,{default:a(()=>[e(p,{modelValue:l(r),"onUpdate:modelValue":i[0]||(i[0]=s=>f(r)?r.value=s:null),label:"Widget name",placeholder:"Widget name",rules:["requiredValidator"in t?t.requiredValidator:l(c)]},null,8,["modelValue","rules"])]),_:1}),e(n,null,{default:a(()=>[e(p,{modelValue:l(o),"onUpdate:modelValue":i[1]||(i[1]=s=>f(o)?o.value=s:null),label:"Widget description",placeholder:"Widget description",rules:["requiredValidator"in t?t.requiredValidator:l(c)]},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1}),e(V,{cols:"3",md:"3"},{default:a(()=>[e(g,{class:"campaing-btn-card"},{default:a(()=>[e(n,null,{default:a(()=>[e(k,{loading:l(d),color:"primary",disabled:!l(w)||l(d),block:"",onClick:b},{default:a(()=>[x(" Create Platform ")]),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1})]),_:1})}}};export{z as default};
