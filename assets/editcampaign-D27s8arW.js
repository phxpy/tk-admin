import{r as $,u as q}from"./validators-DD8u1gFa.js";import{_ as w}from"./AppTextField-UbxN3Csg.js";import{r as m,i as N,az as P,aA as B,ax as T,o as L,f as A,e as l,b as e,m as V,t as U,al as G}from"./index-DjTsIlKx.js";import{_ as C,a as x}from"./DemoSelectChips-CwdWoPEV.js";import{V as p,a as i}from"./VRow-DZAO2dL4.js";import{V as d}from"./VCard-CB9Nw_l4.js";import{V as o}from"./VCardText-NvA5RlKj.js";import"./VTextField-1MIzlOCc.js";import"./VImg-CAE0EHAq.js";import"./forwardRefs-DWGaNmQL.js";import"./AppSelect-DefuZ7wx.js";import"./VList-9G-E0lfh.js";import"./VAvatar-0bmxWKaC.js";import"./VDivider-DqMi194x.js";import"./VOverlay-ojAQHOgf.js";import"./VMenu-BmWZhn2k.js";import"./VCheckboxBtn-DDc5BKYo.js";import"./VChip-DzMEg8d6.js";/* empty css              */const oe={__name:"editcampaign",setup(F){const f=m({}),j=m({}),c=m(""),y=m(""),_=m([]),v=m([]),g=m([]),k=m(""),b=m(""),h=m([]),O=N(),r=P();B(async()=>{const t=await T(`https://tg-adsnet-api-proxy.goourl.ru/api/campaign/${O.query.id}`,{method:"GET"});j.value=t,t.telegram_premium?c.value="Yes":c.value="No",y.value=t.title,t.language.forEach(s=>{_.value.push(r.languages[s])}),t.country.forEach(s=>{v.value.push(r.countries[s])}),t.platform.forEach(s=>{g.value.push(r.platforms[s])});const a=await T("https://tg-adsnet-api-proxy.goourl.ru/api/campaign/tasks/",{method:"GET"});f.value=a;for(const s in Object.keys(a))h.value.push(a[s]);k.value=f.value[t.task_type],b.value=t.target_url});const E=async()=>{const t=[];for(let n in r.platforms)g.value.includes(r.platforms[n])&&t.push(n);const a=[];for(let n in r.countries)v.value.includes(r.countries[n])&&a.push(n);const s=[];for(let n in r.languages)_.value.includes(r.languages[n])&&s.push(n);let u="";for(const n in Object.keys(f.value))k.value===f.value[n]&&(u=f.value[n]);try{const n=await T(`https://tg-adsnet-api-proxy.goourl.ru/api/campaign/${O.query.id}/edit/`,{method:"PATCH",body:{title:y.value,telegram_premium:c.value,platform:t,country:a,language:s,target_url:b.value,task_type:u}})}catch(n){console.error(n)}};return(t,a)=>{const s=w;return L(),A(p,null,{default:l(()=>[e(i,{cols:"9",md:"9"},{default:l(()=>[e(d,{class:"mb-6",title:"Campaing update"},{default:l(()=>[e(o,null,{default:l(()=>[e(s,{modelValue:y.value,"onUpdate:modelValue":a[0]||(a[0]=u=>y.value=u),label:"Name",placeholder:"Campaing name"},null,8,["modelValue"])]),_:1}),e(o,null,{default:l(()=>[e(p,null,{default:l(()=>[e(i,{cols:"6",md:"6"},{default:l(()=>[e(d,{title:"GEO"},{default:l(()=>[e(o,null,{default:l(()=>[e(C,{modelValue:v.value,"onUpdate:modelValue":a[1]||(a[1]=u=>v.value=u),items:Object.values(V(r).countries),"selected-items":v.value},null,8,["modelValue","items","selected-items"])]),_:1})]),_:1})]),_:1}),e(i,{cols:"6",md:"6"},{default:l(()=>[e(d,{title:"Language"},{default:l(()=>[e(o,null,{default:l(()=>[e(C,{modelValue:_.value,"onUpdate:modelValue":a[2]||(a[2]=u=>_.value=u),items:Object.values(V(r).languages),"selected-items":_.value},null,8,["modelValue","items","selected-items"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(o,null,{default:l(()=>[e(p,null,{default:l(()=>[e(i,{cols:"6",md:"6"},{default:l(()=>[e(d,{title:"OS"},{default:l(()=>[e(o,null,{default:l(()=>[e(C,{modelValue:g.value,"onUpdate:modelValue":a[3]||(a[3]=u=>g.value=u),items:Object.values(V(r).platforms),"selected-items":g.value},null,8,["modelValue","items","selected-items"])]),_:1})]),_:1})]),_:1}),e(i,{cols:"6",md:"6"},{default:l(()=>[e(d,{title:"Premium"},{default:l(()=>[e(o,null,{default:l(()=>[e(x,{modelValue:c.value,"onUpdate:modelValue":a[4]||(a[4]=u=>c.value=u),items:["Yes","No"]},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(d,{class:"mb-6",title:"Task settings"},{default:l(()=>[e(o,null,{default:l(()=>[e(p,null,{default:l(()=>[e(i,{cols:"6",md:"6"},{default:l(()=>[e(d,null,{default:l(()=>[e(o,null,{default:l(()=>[e(x,{modelValue:k.value,"onUpdate:modelValue":a[5]||(a[5]=u=>k.value=u),label:"Task type",items:h.value},null,8,["modelValue","items"])]),_:1})]),_:1})]),_:1}),e(i,{cols:"6",md:"6"},{default:l(()=>[e(d,null,{default:l(()=>[e(o,null,{default:l(()=>[e(s,{modelValue:b.value,"onUpdate:modelValue":a[6]||(a[6]=u=>b.value=u),label:"Target link",type:"text",rules:["requiredValidator"in t?t.requiredValidator:V($),"urlValidator"in t?t.urlValidator:V(q)]},null,8,["modelValue","rules"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(o,null,{default:l(()=>[e(p,null,{default:l(()=>[e(i,{cols:"6",md:"6"},{default:l(()=>[e(d,null,{default:l(()=>[e(o,null,{default:l(()=>[U(" 12312312312312 ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(d,{class:"mb-6",title:"Finance settings"},{default:l(()=>[e(o,null,{default:l(()=>[e(p,null,{default:l(()=>[e(i,{cols:"6",md:"6"},{default:l(()=>[e(d,null,{default:l(()=>[e(o,null,{default:l(()=>[e(s,{label:"Task price","prepend-inner-icon":"tabler-currency-dollar",placeholder:"0.00"})]),_:1})]),_:1})]),_:1}),e(i,{cols:"6",md:"6"},{default:l(()=>[e(d,null,{default:l(()=>[e(o,null,{default:l(()=>[e(s,{label:"Campaign limit","prepend-inner-icon":"tabler-currency-dollar",placeholder:"0.00"})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(i,{cols:"3",md:"3"},{default:l(()=>[e(d,{class:"campaing-btn-card"},{default:l(()=>[e(o,null,{default:l(()=>[e(G,{color:"primary",block:"",onClick:E},{default:l(()=>[U(" Update ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}};export{oe as default};
