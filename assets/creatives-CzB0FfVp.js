import { _ as B } from "./AppSelect-BB50_Zry.js";
import "./forwardRefs-DWGaNmQL.js";
import { m as _, i as A, Z as E, R as G, f as h, ay as k, t as l, r as m, G as N, v as o, a as P, d as r, am as R, b as s, e as t, y as U, a0 as V, a2 as w, o as x, Q as z } from "./index-BjDmxniD.js";
import { _ as j } from "./plugin-vue_export-helper-DlAUqK2U.js";
import { V as O } from "./VAvatar-B9QNh2DP.js";
import { V as F } from "./VCard-B4EcrHoo.js";
import { V as L } from "./VCardText-C0Om0SY7.js";
import "./VChip-CH3huRg8.js";
import { V as $, _ as q } from "./VDataTableServer-CM2JVaBU.js";
import { V as M } from "./VDivider-DvZ5B2S5.js";
import { V as Q } from "./VImg-C0T_JZIO.js";
import "./VList-CP8erqy4.js";
import "./VMenu-BktcBYzx.js";
import "./VOverlay-C5gyJjQH.js";
import "./VTextField-DUW-qATq.js";
const Z=p=>(z("data-v-7974a372"),p=p(),G(),p),H={class:"d-flex gap-4 align-center flex-wrap"},J={class:"d-flex align-center gap-2"},K=Z(()=>r("span",null,"Show",-1)),W={class:"d-flex align-center gap-x-3"},X={class:"d-flex flex-column"},Y={class:"text-body-1 font-weight-medium"},ee={class:"text-body-2"},te={__name:"creatives",setup(p){const C=E(),u=A(),c=m({}),I=[{title:"CREATIVE ID",key:"id",sortable:!1},{title:"Status",key:"status",sortable:!1},{title:"Creative",key:"creative",sortable:!1},{title:"Spend",key:"spend",sortable:!1},{title:"Views",key:"views",sortable:!1},{title:"Clicks",key:"clicks",sortable:!1},{title:"CTR",key:"ctr",sortable:!1},{title:"Date created",key:"created_at",sortable:!1},{title:"Action",key:"actions",sortable:!1}],v=m([]),g=async()=>{const d=await k(`https://tg-adsnet-api-proxy.goourl.ru/api/campaign/${u.query.id}/creative/`,{method:"GET"});v.value=d.toSorted((a,f)=>f.id-a.id)};N(async()=>{g()});const n=m(1),i=m(10),S=V(()=>v.value.slice((n.value-1)*i.value,n.value*i.value)),y=V(()=>v.value.length),D=async d=>{c.value[d]=!0;try{await k(`https://tg-adsnet-api-proxy.goourl.ru/api/campaign/${u.query.id}/creative/${d}/delete/`,{method:"DELETE"}),g()}catch(a){console.log(a)}finally{c.value[d]=!1}};return(d,a)=>{const f=B,b=P("IconBtn"),T=q;return x(),h(F,null,{default:t(()=>[s(L,{class:"d-flex justify-space-between align-center flex-wrap gap-4"},{default:t(()=>[r("div",H,[r("div",J,[K,s(f,{"model-value":i.value,items:[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"},{value:-1,title:"All"}],style:{"inline-size":"5.5rem"},"onUpdate:modelValue":a[0]||(a[0]=e=>i.value=parseInt(e,10))},null,8,["model-value"])]),s(R,{"prepend-icon":"tabler-plus",to:{name:"addcreative",query:{campId:_(u).query.id}}},{default:t(()=>[l(" New creative ")]),_:1},8,["to"])])]),_:1}),s(M),s($,{"items-per-page":i.value,"onUpdate:itemsPerPage":a[2]||(a[2]=e=>i.value=e),page:n.value,"onUpdate:page":a[3]||(a[3]=e=>n.value=e),headers:I,items:S.value,"items-length":y.value,class:"text-no-wrap"},{"item.id":t(({item:e})=>[l(o(e.id),1)]),"item.status":t(({item:e})=>[l(o(e.status||"-"),1)]),"item.creative":t(({item:e})=>[r("div",W,[s(O,{size:"34"},{default:t(()=>[e.icon?(x(),h(Q,{key:0,src:`https://tg-adsnet-core.goourl.ru${e.icon}`},null,8,["src"])):U("",!0)]),_:2},1024),r("div",X,[r("div",Y,o(e.title),1),r("div",ee,o(e.description),1)])])]),"item.spend":t(({item:e})=>[l(o(e.stats.sum_advert),1)]),"item.views":t(({item:e})=>[l(o(e.stats.sum_views),1)]),"item.clicks":t(({item:e})=>[l(o(e.stats.sum_hits),1)]),"item.ctr":t(({item:e})=>[l(o(e.stats.ctr),1)]),"item.created_at":t(({item:e})=>[l(o(_(C).timeFormatter.format(new Date(e.created_at))),1)]),"item.actions":t(({item:e})=>[s(b,{to:{name:"editcreative",query:{campId:_(u).query.id,creativeId:e.id}},disabled:c.value[e.id]},{default:t(()=>[s(w,{icon:"tabler-edit"})]),_:2},1032,["to","disabled"]),s(b,{loading:c.value[e.id],disabled:c.value[e.id],onClick:ae=>D(e.id)},{default:t(()=>[s(w,{icon:"tabler-trash"})]),_:2},1032,["loading","disabled","onClick"])]),bottom:t(()=>[s(T,{page:n.value,"onUpdate:page":a[1]||(a[1]=e=>n.value=e),"items-per-page":i.value,"total-items":y.value},null,8,["page","items-per-page","total-items"])]),_:1},8,["items-per-page","page","items","items-length"])]),_:1})}}},ye=j(te,[["__scopeId","data-v-7974a372"]]);export { ye as default };

